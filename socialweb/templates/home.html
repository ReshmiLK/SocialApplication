<!DOCTYPE html>
<html>

<head>
    <title>W3.CSS Template</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <style>
        html,
        body,
        h1,
        h2,
        h3,
        h4,
        h5 {
            font-family: "Open Sans", sans-serif
        }
    </style>
</head>

<body class="w3-theme-l5">

    <!-- Navbar -->
    <div class="w3-top">
        <div class="w3-bar w3-theme-d2 w3-left-align w3-large">
            <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-theme-d2"
                href="javascript:void(0);" onclick="openNav()"><i class="fa fa-bars"></i></a>
            <a href="#" class="w3-bar-item w3-button w3-padding-large w3-theme-d4"><i
                    class="fa fa-home w3-margin-right"></i>Social App</a>
            <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" title="News"><i
                    class="fa fa-globe"></i></a>
            <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white"
                title="Account Settings"><i class="fa fa-user"></i></a>
            <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" title="Messages"><i
                    class="fa fa-envelope"></i></a>
            <div class="w3-dropdown-hover w3-hide-small">
                <button class="w3-button w3-padding-large" title="Notifications"><i class="fa fa-bell"></i><span
                        class="w3-badge w3-right w3-small w3-green">3</span></button>
                <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="width:300px">
                    <a href="#" class="w3-bar-item w3-button">One new friend request</a>
                </div>
            </div>
            <a href="{%url 'signout' %}" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white"
                title="My Account">
                <button type="submit" method="post" href="">LogOut</button>
            </a>
        </div>
    </div>

    <!-- Navbar on small screens -->
    <div id="navDemo" class="w3-bar-block w3-theme-d2 w3-hide w3-hide-large w3-hide-medium w3-large">
        <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 1</a>
        <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 2</a>
        <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 3</a>
        <a href="#" class="w3-bar-item w3-button w3-padding-large">My Profile</a>
    </div>

    <!-- Page Container -->
    <div class="w3-container w3-content" style="max-width:1400px;margin-top:80px">
        <!-- The Grid -->
        <div class="w3-row">
            <!-- Left Column -->
            <div class="w3-col m3">
                <!-- Profile -->
                <div class="w3-card w3-round w3-white">
                    <div class="w3-container">
                        <h4 class="w3-center">{{request.user}}</h4>
                        <p class="w3-center">
                            {%if request.user.profile.time_line_pic%}
                            <img src=".{{request.user.profile.time_line_pic.url}}" class="img-fluid" alt="...">
                            {%else%}
                            <img src="/w3images/avatar3.png" class="w3-circle" style="height:106px;width:106px"
                                alt="Avatar">
                            {%endif%}
                            {%if request.user.profile.profile_pic%}
                            <img src="{{request.user.profile.profile_pic.url}}" class="w3-circle"
                                style="height:106px;width:106px" alt="Avatar">
                            {%else%}
                            <img src="/w3images/avatar3.png" class="w3-circle" style="height:106px;width:106px"
                                alt="Avatar">
                            {%endif%}

                        </p>
                        <hr>
                        <p><i class="fa fa-pencil fa-fw w3-margin-right w3-text-theme"></i> {{request.user.profile.bio}}
                        </p>
                        <p><i class="fa fa-home fa-fw w3-margin-right w3-text-theme"></i> Kerala, INDIA</p>
                        <p><i class="fa fa-birthday-cake fa-fw w3-margin-right w3-text-theme"></i> </p>
                    </div>
                </div>
                <br>

                <!-- Accordion -->
                <div class="w3-card w3-round">
                    <div class="w3-white">
                        {%if request.user.profile%}
                        <a href="{%url 'profile-detail'%}">
                            <button  class="w3-button w3-block w3-theme-l1 w3-left-align"><i
                                class="fa fa-eye  fa-fw w3-margin-right" aria-hidden="true"></i> View Profile</button>
                        </a>
                        
                        <a href="{%url 'profile-edit' request.user.profile.id%}">
                            <button  class="w3-button w3-block w3-theme-l1 w3-left-align"><i
                                class="fa fa-pencil fa-fw w3-margin-right"></i> Update Profile</button>
                        </a>
                        {%else%}
                        <a href=" {%url 'profile-add'%}">
                            <button type="submit" method="post" class="w3-button w3-block w3-theme-l1 w3-left-align"><i 
                                class="fa fa-plus  fa-fw w3-margin-right" aria-hidden="true"></i>Add Profile</button>
                        </a>
                        {%endif%}
                        <button  class="w3-button w3-block w3-theme-l1 w3-left-align"><i
                            class="fa fa-bars  fa-fw w3-margin-right" aria-hidden="true"></i>My Posts: {{pcnt}}</button>

                    </div>
                </div>
                <br>

                <!-- Interests -->
                <div class="w3-card w3-round w3-white w3-hide-small">
                    <div class="w3-container">
                        <p>Interests</p>
                        <p>
                            <span class="w3-tag w3-small w3-theme-d5">News</span>
                            <span class="w3-tag w3-small w3-theme-d2">Games</span>
                            <span class="w3-tag w3-small w3-theme-d1">Friends</span>
                            <span class="w3-tag w3-small w3-theme-l2">Food</span>
                            <span class="w3-tag w3-small w3-theme-l3">Design</span>
                            <span class="w3-tag w3-small w3-theme-l4">Art</span>
                            <span class="w3-tag w3-small w3-theme-l5">Photos</span>
                        </p>
                    </div>
                </div>
                <br>

                <!-- Alert Box -->
                <div
                    class="w3-container w3-display-container w3-round w3-theme-l4 w3-border w3-theme-border w3-margin-bottom w3-hide-small">
                    <span onclick="this.parentElement.style.display='none'"
                        class="w3-button w3-theme-l3 w3-display-topright">
                        <i class="fa fa-remove"></i>
                    </span>
                    <p><strong>Hey!</strong></p>
                    <p>Welcome to Social App</p>
                </div>

                <!-- End Left Column -->
            </div>

            <!-- Middle Column -->
            <div class="w3-col m7">

                <div class="w3-row-padding">
                    <div class="w3-col m12">
                        <div class="w3-card w3-round w3-white">
                            <div class="w3-container w3-padding">
                                <h6 class="w3-opacity">Add Your Post</h6>
                                <form action="" method="post" enctype="multipart/form-data">
                                    {%csrf_token%}
                                    {{form.as_p}}
                                    <button type="submit" class="w3-button w3-theme"><i class="fa fa-pencil"></i>
                                         Post</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                {%for p in post%}
                <div class="w3-container w3-card w3-white w3-round w3-margin"><br>
                    {%if p.user.profile.profile_pic%}
                    <img src="{{p.user.profile.profile_pic.url}}" alt="Avatar"
                        class="w3-left w3-circle w3-margin-right" style="width:40px ">
                    {%else%}
                    <img src="/w3images/avatar2.png" alt="Avatar" class="w3-left w3-circle w3-margin-right"
                        style="width:60px">
                    {%endif%}

                    <span class="w3-right w3-opacity">{{p.created_date}}</span>
                    {%if request.user == p.user %}
                    <span class="w3-right w3-opacity"><a href="{%url 'post-delete' p.id%}"><i
                                class="fa fa-trash"></i></a>
                    </span>
                    {%endif%}
                    <h3>{{p.user}}</h3>
                    <br>
                    <br>
                    <hr>

                    <div class="w3-row-padding" style="margin:0 -16px">
                        <div class="w3-half">
                            <h5>"{{p.caption}}"</h5>
                            {%if p.image%}
                            <img src="{{p.image.url}}" style="width:100%" alt="Northern Lights"
                                class="w3-margin-bottom">
                            {%endif%}
                        </div>
                    </div>
                    {{p.like_count}}
                    <a href="{% url 'like' p.id%}"><button type="submit"
                            class="w3-button w3-theme-d1 w3-margin-bottom"><i class="fa fa-thumbs-up"></i>
                             Like</button></a>
                    <a href="{% url 'dislike' p.id%}"><button type="submit"
                            class="w3-button w3-theme-d1 w3-margin-bottom"><i class="fa fa-thumbs-down"></i>
                             Dislike</button></a>


                    <div class="section">
                        <div class="card">
                            <div class="card-header">
                                {%if request.user.profile.profile_pic%}
                                <img src="{{request.user.profile.profile_pic.url}}" alt="Avatar"
                                    class="w3-left w3-circle w3-margin-right" style="width:40px ">
                                {%else%}
                                <img src="/w3images/avatar2.png" alt="Avatar" class="w3-left w3-circle w3-margin-right"
                                    style="width:60px">
                                {%endif%}

                                {{request.user}}
                            </div>
                            <form action="{%url 'add-comment' p.id%}" method="post">
                                {%csrf_token%}
                                <input type="text" class="form-control" placeholder="add your comment" name="comment">
                                <a href="#" class=""><button type="submit"
                                        class="w3-button w3-theme-d2 w3-margin-bottom"><i class="fa fa-comment"></i>
                                         Comment</button></a>

                            </form>

                        </div>
                    </div>
                    <!-- comment list -->
                    <div class="card" style="width: 100%;">
                        <div class="card-header">
                            {{p.post_comment.count}}
                            Comments
                        </div>
                        <ul class="list-group list-group-flush">
                            {%for cmnt in p.post_comment%}
                            <li class="list-group-item">
                                {%if cmnt.user.profile.profile_pic%}
                                <img src="{{cmnt.user.profile.profile_pic.url}}" alt="Avatar"
                                    class="w3-left w3-circle w3-margin-right" style="width:15px ">
                                {%else%}
                                <img src="/w3images/avatar2.png" alt="Avatar" class="w3-left w3-circle w3-margin-right"
                                    style="width:60px">
                                {%endif%}

                                <p><strong>{{cmnt.comment}}</strong> posted by <strong>{{cmnt.user}} on {{cmnt.created_date}}</strong>
                               {{cmnt.clike_count}} <a href="{%url 'comment-like' cmnt.id%}"><i
                                            class="fa fa-thumbs-up"></i></a>
                                    <a href="{%url 'comment-dislike' cmnt.id%}"><i class="fa fa-thumbs-down"></i></a>
                                </p>

                            </li>
                            {%endfor%}
                        </ul>
                    </div>
                    <!-- comment list end -->
                </div>
                {%endfor%}

                <!-- End Middle Column -->
            </div>

            <!-- Right Column -->
            <div class="w3-col m2">
                <div class="w3-card w3-round w3-white w3-center">
                    <div class="w3-container">
                        <p>Upcoming Events:</p>
                        <img src="/w3images/forest.jpg" alt="Forest" style="width:100%;">
                        <p><strong>Holiday</strong></p>
                        <p>Friday 15:00</p>
                        <p><button class="w3-button w3-block w3-theme-l4">Info</button></p>
                    </div>
                </div>
                <br>

                <div class="w3-card w3-round w3-white w3-center">
                    <div class="w3-container">
                        <p>Friend Request</p>
                        <img src="/w3images/avatar6.png" alt="Avatar" style="width:50%"><br>
                        <span>Jane Doe</span>
                        <div class="w3-row w3-opacity">
                            <div class="w3-half">
                                <button class="w3-button w3-block w3-green w3-section" title="Accept"><i
                                        class="fa fa-check"></i></button>
                            </div>
                            <div class="w3-half">
                                <button class="w3-button w3-block w3-red w3-section" title="Decline"><i
                                        class="fa fa-remove"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                <br>

                <div class="w3-card w3-round w3-white w3-padding-16 w3-center">
                    <p>ADS</p>
                </div>
                <br>

                <div class="w3-card w3-round w3-white w3-padding-32 w3-center">
                    <p><i class="fa fa-bug w3-xxlarge"></i></p>
                </div>

                <!-- End Right Column -->
            </div>

            <!-- End Grid -->
        </div>

        <!-- End Page Container -->
    </div>
    <br>

    <!-- Footer -->
    <footer class="w3-container w3-theme-d3 w3-padding-16">
        <h5>Footer</h5>
    </footer>

    <footer class="w3-container w3-theme-d5">
        <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    </footer>

    <script>
        // Accordion
        function myFunction(id) {
            var x = document.getElementById(id);
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
                x.previousElementSibling.className += " w3-theme-d1";
            } else {
                x.className = x.className.replace("w3-show", "");
                x.previousElementSibling.className =
                    x.previousElementSibling.className.replace(" w3-theme-d1", "");
            }
        }

        // Used to toggle the menu on smaller screens when clicking on the menu button
        function openNav() {
            var x = document.getElementById("navDemo");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
            } else {
                x.className = x.className.replace(" w3-show", "");
            }
        }
    </script>

</body>

</html>